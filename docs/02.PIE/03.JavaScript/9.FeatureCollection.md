---
title: FeatureCollection
date: 2022-05-14 00:14:31
permalink: /pages/eb3ec9/
categories:
  - PIE
  - JavaScript
tags:
  - 
---
## ç®€ä»‹

è¦ç´ é›†ï¼ˆFeatureCollectionï¼‰æ˜¯PIE-Engineä¸‹çš„çŸ¢é‡æ•°æ®é›†å¯¹è±¡ï¼Œæ˜¯Featureçš„ä¸€ä¸ªé›†åˆã€‚ä¼—å¤šçš„Featureå¯¹è±¡è¦æ±‚å…·æœ‰ç›¸åŒçš„å±æ€§å­—æ®µï¼Œå‡ ä½•å›¾å½¢çš„åæ ‡ç³»ä¹Ÿè¦ç›¸åŒã€‚PIE-Engine Studioæä¾›æ„å»ºè¦ç´ é›†ç®—å­åŠè¦ç´ é›†ç›¸å…³ç®—æ³•ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºåŠ è½½è¦ç´ é›†ï¼Œè·å–è¦ç´ é›†å±æ€§ä¿¡æ¯ã€å‡ ä½•ä¿¡æ¯ï¼Œæ¸²æŸ“è¦ç´ é›†ï¼Œè¦ç´ é›†å†…Featureå¾ªç¯è®¡ç®—ï¼Œè¦ç´ é›†æŒ‡å®šå±æ€§è¿›è¡Œèšåˆç»Ÿè®¡è®¡ç®—ã€‚

## FeatureCollection

| å‡½æ•°                            | è¿”å›å€¼            |
| ------------------------------- | ----------------- |
| FeatureCollection(args,columns) | FeatureCollection |

| å‚æ•°    | ç±»å‹                                   | è¯´æ˜                                                         |
| ------- | -------------------------------------- | ------------------------------------------------------------ |
| args    | String\|PIEGeometry\|PIEFeature\|Array | çŸ¢é‡æ•°æ®è·¯å¾„æˆ–å•ä¸ªPIEGeomeryå¯¹è±¡æˆ–å•ä¸ªPIEFeatureå¯¹è±¡æˆ–PIEFeatureå¯¹è±¡Array |
| columns | String                                 | æœªå¯ç”¨                                                       |


```javascript
var featureCollection = pie.FeatureCollection('NGCC/CHINA_PROVINCE_BOUNDARY');
print(featureCollection);
```

## aggregate_array

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸­æ‰€æœ‰Featureå¯¹è±¡çš„å±æ€§å€¼ä¿¡æ¯ï¼Œè¾“å‡ºè¿™äº›å±æ€§å€¼çš„é›†åˆã€‚

| å‡½æ•°                       | è¿”å›å€¼ |
| -------------------------- | ------ |
| aggregate_array (property) | List   |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
// åœ¨feature1ä¸­æ·»åŠ å€¼ä¸º10çš„â€œaddPropâ€å±æ€§
var feature1=pie.Feature(pie.Geometry.Point([118.5, 31.6] , null)).set("addProp",10);
print("feature1",feature1);

// åœ¨feature2ä¸­æ·»åŠ å€¼ä¸º2çš„â€œaddPropâ€å±æ€§
var feature2=pie.Feature(pie.Geometry.Point([118.5, 30.6] , null)).set("addProp",2);
print("feature2",feature2);

// åˆå¹¶feature1å’Œfeature2è‡³è¦ç´ é›†
var fCol=pie.FeatureCollection([feature1,feature2]);

// ç»Ÿè®¡"addProp"å±æ€§å€¼çš„é›†åˆ
var array=fCol.aggregate_array("addProp");
print("array",array);
```

## aggregate_count

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸­æ‰€æœ‰Featureå¯¹è±¡çš„å±æ€§å€¼ä¿¡æ¯ï¼Œè®¡ç®—å…¶ä¸­éç©ºå±æ€§å€¼çš„æ•°ç›®ã€‚

| å‡½æ•°                       | è¿”å›å€¼ |
| -------------------------- | ------ |
| aggregate_count (property) | Number |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
// åœ¨feature1ä¸­æ·»åŠ å€¼ä¸º10çš„â€œaddPropâ€å±æ€§
var feature1=pie.Feature(pie.Geometry.Point([118.5, 31.6] , null)).set("addProp",10);
print("feature1",feature1);

// åœ¨feature2ä¸­æ·»åŠ å€¼ä¸º2çš„â€œaddPropâ€å±æ€§
var feature2=pie.Feature(pie.Geometry.Point([118.5, 30.6] , null)).set("addProp",2);
print("feature2",feature2);

// åˆå¹¶feature1å’Œfeature2è‡³è¦ç´ é›†
var fCol=pie.FeatureCollection([feature1,feature2]);
// ç»Ÿè®¡"addProp"ä¸­éç©ºå±æ€§å€¼çš„æ•°ç›®
var count=fCol.aggregate_count("addProp");
print(count);
```

## aggregate_first

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸­æ‰€æœ‰Featureå¯¹è±¡çš„å±æ€§å€¼ä¿¡æ¯ï¼Œè®¡ç®—å…¶ä¸­é¦–ä¸ªå¯¹è±¡çš„å±æ€§å€¼ã€‚

| å‡½æ•°                       | è¿”å›å€¼                                |
| -------------------------- | ------------------------------------- |
| aggregate_first (property) | String\|Number\|Boolean\|Object\|List |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
// åœ¨feature1ä¸­æ·»åŠ å€¼ä¸º10çš„â€œaddPropâ€å±æ€§
var feature1=pie.Feature(pie.Geometry.Point([118.5, 31.6] , null)).set("addProp",10);
print("feature1",feature1);

// åœ¨feature2ä¸­æ·»åŠ å€¼ä¸º2çš„â€œaddPropâ€å±æ€§
var feature2=pie.Feature(pie.Geometry.Point([118.5, 30.6] , null)).set("addProp",2);
print("feature2",feature2);

// åˆå¹¶feature1å’Œfeature2è‡³è¦ç´ é›†
var fCol=pie.FeatureCollection([feature1,feature2]);
print("fCol",fCol);

// è¿”å›"addProp"å±æ€§é¦–ä¸ªå¯¹è±¡çš„å±æ€§å€¼
var first=fCol.aggregate_first("addProp");
print(first);
```

## aggregate_mean

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸­æ‰€æœ‰Featureå¯¹è±¡çš„å±æ€§å€¼ä¿¡æ¯ï¼Œè¾“å‡ºè¿™äº›å±æ€§å€¼çš„å¹³å‡å€¼ã€‚

| å‡½æ•°                      | è¿”å›å€¼ |
| ------------------------- | ------ |
| aggregate_mean (property) | Number |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
// åœ¨feature1ä¸­æ·»åŠ å€¼ä¸º10çš„â€œaddPropâ€å±æ€§
var feature1=pie.Feature(pie.Geometry.Point([118.5, 31.6] , null)).set("addProp",10);
print("feature1",feature1);

// åœ¨feature2ä¸­æ·»åŠ å€¼ä¸º2çš„â€œaddPropâ€å±æ€§
var feature2=pie.Feature(pie.Geometry.Point([118.5, 30.6] , null)).set("addProp",2);
print("feature2",feature2);

// åˆå¹¶feature1å’Œfeature2è‡³è¦ç´ é›†
var fCol=pie.FeatureCollection([feature1,feature2]);
print("fCol",fCol);

// è¿”å›"addProp"å±æ€§å€¼å¹³å‡å€¼
var mean=fCol.aggregate_mean("addProp");
print(mean);
```

## aggregate_max

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸­æ‰€æœ‰Featureå¯¹è±¡çš„å±æ€§å€¼ä¿¡æ¯ï¼Œè¾“å‡ºè¿™äº›å±æ€§å€¼çš„æœ€å¤§å€¼ã€‚

| å‡½æ•°                     | è¿”å›å€¼ |
| ------------------------ | ------ |
| aggregate_max (property) | Number |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
// åœ¨feature1ä¸­æ·»åŠ å€¼ä¸º10çš„â€œaddPropâ€å±æ€§
var feature1=pie.Feature(pie.Geometry.Point([118.5, 31.6] , null)).set("addProp",10);
print("feature1",feature1);

// åœ¨feature2ä¸­æ·»åŠ å€¼ä¸º2çš„â€œaddPropâ€å±æ€§
var feature2=pie.Feature(pie.Geometry.Point([118.5, 30.6] , null)).set("addProp",2);
print("feature2",feature2);

// åˆå¹¶feature1å’Œfeature2è‡³è¦ç´ é›†
var fCol=pie.FeatureCollection([feature1,feature2]);
print("fCol",fCol);

// è¿”å›"addProp"å±æ€§ä¸­æœ€å¤§å±æ€§å€¼
var max=fCol.aggregate_max("addProp");
print(max);
```

## aggregate_min

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸­æ‰€æœ‰Featureå¯¹è±¡çš„å±æ€§å€¼ä¿¡æ¯ï¼Œè¾“å‡ºè¿™äº›å±æ€§å€¼çš„æœ€å°å€¼ã€‚

| å‡½æ•°                     | è¿”å›å€¼ |
| ------------------------ | ------ |
| aggregate_min (property) | Number |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
// åœ¨feature1ä¸­æ·»åŠ å€¼ä¸º10çš„â€œaddPropâ€å±æ€§
var feature1=pie.Feature(pie.Geometry.Point([118.5, 31.6] , null)).set("addProp",10);
print("feature1",feature1);

// åœ¨feature2ä¸­æ·»åŠ å€¼ä¸º2çš„â€œaddPropâ€å±æ€§
var feature2=pie.Feature(pie.Geometry.Point([118.5, 30.6] , null)).set("addProp",2);
print("feature2",feature2);

// åˆå¹¶feature1å’Œfeature2è‡³è¦ç´ é›†
var fCol=pie.FeatureCollection([feature1,feature2]);
print("fCol",fCol);

// è¿”å›"addProp"å±æ€§å€¼çš„æœ€å°å€¼
var min=fCol.aggregate_min("addProp");
print(min);
```

## aggregate_sum

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸­æ‰€æœ‰Featureå¯¹è±¡çš„å±æ€§å€¼ä¿¡æ¯ï¼Œè¾“å‡ºè¿™äº›å±æ€§å€¼çš„å’Œã€‚

| å‡½æ•°                     | è¿”å›å€¼ |
| ------------------------ | ------ |
| aggregate_sum (property) | Number |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
// åœ¨feature1ä¸­æ·»åŠ å€¼ä¸º10çš„â€œaddPropâ€å±æ€§
var feature1=pie.Feature(pie.Geometry.Point([118.5, 31.6] , null)).set("addProp",10);
print("feature1",feature1);

// åœ¨feature2ä¸­æ·»åŠ å€¼ä¸º2çš„â€œaddPropâ€å±æ€§
var feature2=pie.Feature(pie.Geometry.Point([118.5, 30.6] , null)).set("addProp",2);
print("feature2",feature2);

// åˆå¹¶feature1å’Œfeature2è‡³è¦ç´ é›†
var fCol=pie.FeatureCollection([feature1,feature2]);
print("fCol",fCol);

// è¿”å›"addProp"å±æ€§å€¼çš„å’Œ
var sum=fCol.aggregate_sum("addProp");
print(sum);
```

## classify

å¯¹FeatureCollectionä¸­çš„æ¯ä¸ªè¦ç´ è¿›è¡Œåˆ†ç±»ã€‚

| å‡½æ•°                             | è¿”å›å€¼            |
| -------------------------------- | ----------------- |
| classify(classifier, outputName) | FeatureCollection |

| å‚æ•°       | ç±»å‹                                              | è¯´æ˜                                           |
| ---------- | ------------------------------------------------- | ---------------------------------------------- |
| classifier | ClassifierRT/ClassifierSVM/ ClassifierNormalBayes | åˆ†ç±»å™¨                                         |
| outputName | String                                            | è¦æ·»åŠ çš„è¾“å‡ºå±æ€§çš„åç§°ï¼Œé»˜è®¤ä¸º"classification" |


```javascript
Map.setCenter(0, 0, 0);
// åŠ è½½åŸå§‹çŸ¢é‡å’Œæ …æ ¼æ•°æ®
var image = pie.Image('user/17090142114/PGDB001/World84').select(["B1", "B2", "B3"]);
var featureCollection = pie.FeatureCollection('user/17090142114/PGDB001/WorldROI');

// è·å¾—è®­ç»ƒæ ·æœ¬ï¼Œå¹¶ä¸”æŒ‰ç…§7:3åˆ†æˆè®­ç»ƒæ ·æœ¬å’ŒéªŒè¯æ ·æœ¬
var sampleFeatureCollection = image.sampleRegions(featureCollection, ["type"], 50000);
sampleFeatureCollection = sampleFeatureCollection.randomColumn('random');
var trainingFeatures = sampleFeatureCollection.filter(pie.Filter.lte("random", 0.7));
var testingFeatures = sampleFeatureCollection.filter(pie.Filter.gt("random", 0.7));

// æ„å»ºSVMåˆ†ç±»å™¨ï¼Œå¹¶è®­ç»ƒæ•°æ®
var classifer = pie.Classifier.svm().train(trainingFeatures, "type", ["B1", "B2", "B3"]);

// å½±åƒåˆ†ç±»ï¼Œå¹¶åŠ è½½æ˜¾ç¤º
var resultImage = image.classify(classifer, "classifyA");
var visParam = {
  opacity:1,
  uniqueValue:'1,2,3,4',
  palette: 'EAF2F5,000032,1F3600,FAFFC8'
};
Map.addLayer(resultImage, visParam,"ClassifyImage");

// è¯„ä¼°è®­ç»ƒæ ·æœ¬çš„ç²¾åº¦
var checkM = classifer.confusionMatrix();
print(checkM.getInfo());
print(checkM.acc().getInfo());
print(checkM.kappa().getInfo());

// è¯„ä¼°éªŒè¯æ ·æœ¬çš„ç²¾åº¦
var predictResult = testingFeatures.classify(classifer,"classification");
var errorM=predictResult.errorMatrix("type","classification");
print(errorM.getInfo());
print(errorM.acc().getInfo());
print(errorM.kappa().getInfo());
```

## errorMatrix

é€šè¿‡æ¯”è¾ƒFeatureCollectionçš„ä¸¤åˆ—ï¼ˆä¸€åˆ—åŒ…å«å®é™…å€¼ï¼Œå¦ä¸€åˆ—åŒ…å«é¢„æµ‹å€¼ï¼‰ï¼Œè®¡ç®—FeatureCollectionçš„äºŒç»´é”™è¯¯çŸ©é˜µï¼Œå…¶ä¸­æ•°å€¼ä»0å¼€å§‹ã€‚çŸ©é˜µçš„è½´0ï¼ˆè¡Œï¼‰å¯¹åº”äºå®é™…å€¼ï¼Œè½´1ï¼ˆåˆ—ï¼‰å¯¹åº”äºé¢„æµ‹å€¼ã€‚

| å‡½æ•°                                  | è¿”å›å€¼          |
| ------------------------------------- | --------------- |
| errorMatrix(actual, predicted, order) | ConfusionMatrix |

| å‚æ•°      | ç±»å‹   | è¯´æ˜                   |
| --------- | ------ | ---------------------- |
| actual    | String | åŒ…å«å®é™…å€¼çš„å±æ€§çš„åç§° |
| predicted | String | åŒ…å«é¢„æµ‹å€¼çš„å±æ€§çš„åç§° |
| order     | List   | æœªå¯ç”¨                 |


```javascript
Map.setCenter(0, 0, 0);
// åŠ è½½åŸå§‹çŸ¢é‡å’Œæ …æ ¼æ•°æ®
var image = pie.Image('user/17090142114/PGDB001/World84').select(["B1", "B2", "B3"]);
var featureCollection = pie.FeatureCollection('user/17090142114/PGDB001/WorldROI');

// è·å¾—è®­ç»ƒæ ·æœ¬ï¼Œå¹¶ä¸”æŒ‰ç…§7:3åˆ†æˆè®­ç»ƒæ ·æœ¬å’ŒéªŒè¯æ ·æœ¬
var sampleFeatureCollection = image.sampleRegions(featureCollection, ["type"], 50000);
sampleFeatureCollection = sampleFeatureCollection.randomColumn('random');
var trainingFeatures = sampleFeatureCollection.filter(pie.Filter.lte("random", 0.7));
var testingFeatures = sampleFeatureCollection.filter(pie.Filter.gt("random", 0.7));

// æ„å»ºSVMåˆ†ç±»å™¨ï¼Œå¹¶è®­ç»ƒæ•°æ®
var classifer = pie.Classifier.svm().train(trainingFeatures, "type", ["B1", "B2", "B3"]);

// å½±åƒåˆ†ç±»ï¼Œå¹¶åŠ è½½æ˜¾ç¤º
var resultImage = image.classify(classifer, "classifyA");
var visParam = {
  opacity:1,
  uniqueValue:'1,2,3,4',
  palette: 'EAF2F5,000032,1F3600,FAFFC8'
};
Map.addLayer(resultImage, visParam,"ClassifyImage");

// è¯„ä¼°è®­ç»ƒæ ·æœ¬çš„ç²¾åº¦
var checkM = classifer.confusionMatrix();
print(checkM.getInfo());
print(checkM.acc().getInfo());
print(checkM.kappa().getInfo());

// è¯„ä¼°éªŒè¯æ ·æœ¬çš„ç²¾åº¦
var predictResult = testingFeatures.classify(classifer,"classification");
var errorM=predictResult.errorMatrix("type","classification");
print(errorM.getInfo());
print(errorM.acc().getInfo());
print(errorM.kappa().getInfo());
```

## filter

å¯¹FeatureCollectionå¯¹è±¡é€šè¿‡æŒ‡å®šè¿‡æ»¤å™¨è¿›è¡Œè¿‡æ»¤ï¼Œè¿”å›è¿‡æ»¤åçš„FeatureCollectionå¯¹è±¡ã€‚

| å‡½æ•°           | è¿”å›å€¼            |
| -------------- | ----------------- |
| filter(filter) | FeatureCollection |

| å‚æ•°   | ç±»å‹   | è¯´æ˜       |
| ------ | ------ | ---------- |
| filter | Filter | è¿‡æ»¤å™¨å¯¹è±¡ |


```javascript
var beijing = pie.FeatureCollection('NGCC/CHINA_PROVINCE_BOUNDARY')
        .filter(pie.Filter.eq('name', 'åŒ—äº¬å¸‚'))
        .first()
        .geometry();
Map.centerObject(beijing, 7);
Map.addLayer(beijing, null, "BeiJing");
```

## filterBounds

å¯¹FeatureCollectionå¯¹è±¡è¿›è¡Œç©ºé—´èŒƒå›´è¿‡æ»¤ï¼Œç­›é€‰å‡ºåœ¨ç»™å®šç©ºé—´èŒƒå›´å†…çš„featureï¼Œè¿”å›è¿‡æ»¤åçš„FeatureCollectionå¯¹è±¡ã€‚

| å‡½æ•°                   | è¿”å›å€¼            |
| ---------------------- | ----------------- |
| filterBounds(geometry) | FeatureCollection |

| å‚æ•°     | ç±»å‹     | è¯´æ˜         |
| -------- | -------- | ------------ |
| geometry | Geometry | è¿‡æ»¤ç©ºé—´èŒƒå›´ |


```javascript
var polygon = pie.Geometry.Polygon(
        [[[120, 41], [121, 41], [121, 42], [120, 42],[120, 41]]], null);

var neimeng = pie.FeatureCollection('NGCC/CHINA_PROVINCE_BOUNDARY')
        .filterBounds(polygon)
        .first()
        .geometry();

Map.centerObject(neimeng, 3);
Map.addLayer(neimeng, null, 'NeiMeng');
```

## first

è·å¾—ç¬¬ä¸€ä¸ªFeatureå¯¹è±¡ã€‚

| å‡½æ•°    | è¿”å›å€¼  |
| ------- | ------- |
| first() | Feature |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var feature = featureCollection.first();
```

## geometries

è·å¾—FeatureCollectionä¸‹å‡ ä½•å›¾å½¢ä¿¡æ¯ï¼Œå‡ ä½•ä¿¡æ¯ä»¥Jsonå½¢å¼è¡¨ç¤ºã€‚

| å‡½æ•°                  | è¿”å›å€¼  |
| --------------------- | ------- |
| geometries(tolerance) | PIEList |

| å‚æ•°      | ç±»å‹            | è¯´æ˜                                              |
| --------- | --------------- | ------------------------------------------------- |
| this      | ImageCollection | è¦è¿›è¡Œè®¡ç®—çš„å½±åƒé›†åˆ                              |
| tolerance | Number          | ç»“æœç®€åŒ–è·ç¦»èŒƒå›´ï¼Œå•ä½ç±³ï¼Œé»˜è®¤è·ç¦»ä¸º0ï¼Œè¡¨ç¤ºä¸ç®€åŒ– |


```javascript
var featureCollection = pie.FeatureCollection().load('user/101/public/shape/Shi_HeBei');
var geometryList = featureCollection.geometries(2000);
print(geometryList);
```

## get

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸‹çš„å±æ€§å€¼ä¿¡æ¯ã€‚

| å‡½æ•°     | è¿”å›å€¼                                |
| -------- | ------------------------------------- |
| get(key) | String\|Number\|Boolean\|Object\|List |

| å‚æ•° | ç±»å‹   | è¯´æ˜   |
| ---- | ------ | ------ |
| key  | String | å±æ€§å |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
featureCollection = featureCollection.set("key1",{name:123});
var value = featureCollection.get("key1");
print(value);
```

## getArray

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸‹çš„å±æ€§å€¼ä¿¡æ¯ï¼Œå¹¶ä¸”å°†å…¶è½¬æ¢ä¸ºæ•°ç»„ç±»å‹ã€‚

| å‡½æ•°               | è¿”å›å€¼ |
| ------------------ | ------ |
| getArray(property) | Array  |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var dict = {key1: [1, 2, 3, 4, 5, 6], key2: 12.34, key3: "12.34"};
featureCollection = featureCollection.setMulti(dict);
var value = featureCollection.getArray("key1");
print(value);
```

## getAt

è·å¾—æŒ‡å®šç¼–å·çš„Featureå¯¹è±¡ã€‚

| å‡½æ•°         | è¿”å›å€¼  |
| ------------ | ------- |
| getAt(index) | Feature |

| å‚æ•°  | ç±»å‹   | è¯´æ˜          |
| ----- | ------ | ------------- |
| index | Number | Featureçš„ç¼–å· |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var feature = featureCollection.getAt(0);
```

## getInfo

å¿«æ·è®¡ç®—ç›¸å…³çš„å€¼ã€‚

| å‡½æ•°      | è¿”å›å€¼         |
| --------- | -------------- |
| getInfo() | Number\|Object |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var count = featureCollection.size().getInfo();
print(count);
```

## getNumber

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸‹çš„å±æ€§å€¼ä¿¡æ¯ï¼Œå¹¶ä¸”å°†å…¶è½¬æ¢ä¸ºæ•°å€¼ç±»å‹ã€‚

| å‡½æ•°                | è¿”å›å€¼ |
| ------------------- | ------ |
| getNumber(property) | Number |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var dict = {key1: [1, 2, 3, 4, 5, 6], key2: 12.34, key3: "12.34"};
featureCollection = featureCollection.setMulti(dict);
var value = featureCollection.getNumber("key3");
print(value);
```

## getString

æ ¹æ®å±æ€§åè·å¾—FeatureCollectionä¸‹çš„å±æ€§å€¼ä¿¡æ¯ï¼Œå¹¶ä¸”å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚

| å‡½æ•°                | è¿”å›å€¼ |
| ------------------- | ------ |
| getString(property) | String |

| å‚æ•°     | ç±»å‹   | è¯´æ˜   |
| -------- | ------ | ------ |
| property | String | å±æ€§å |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var dict = {key1: [1, 2, 3, 4, 5, 6], key2: 12.34, key3: "12.34"};
featureCollection = featureCollection.setMulti(dict);
var value = featureCollection.getString("key2").getInfo();
print(value);
```

## id

è¿”å›FeatureCollectionå¯¹è±¡çš„idã€‚

| å‡½æ•° | è¿”å›å€¼ |
| ---- | ------ |
| id() | String |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var id = featureCollection.id().getInfo();
print(id);
```

## limit

è¿”å›é›†åˆä¸­å‰å‡ ä¸ªè¦ç´ çš„é›†åˆã€‚

| å‡½æ•°         | è¿”å›å€¼            |
| ------------ | ----------------- |
| limit(count) | FeatureCollection |

| å‚æ•°  | ç±»å‹              | è¯´æ˜                     |
| ----- | ----------------- | ------------------------ |
| this  | FeatureCollection | è¦è¿›è¡Œåˆå¹¶çš„è¦ç´ é›†åˆ     |
| count | Number            | æ•°å€¼ï¼Œè¦è¿”å›çš„è¦ç´ çš„ä¸ªæ•° |


```javascript
// å®šä¹‰è¦ç´ æ•°æ®é›†1
var geometry1 = pie.Geometry.Polygon([[[117, 31], [118, 31], [118, 32], [117, 32], [117, 31]]]);
var properties1 = {name: "Test1", age: 12};
var feature1 = pie.Feature(geometry1, properties1).set("id", "1111");
var collection1 = pie.FeatureCollection(feature1);

// å®šä¹‰è¦ç´ æ•°æ®é›†2
var geometry2 = pie.Geometry.Polygon([[[117, 32.1], [118, 32.1], [118, 33.1], [117, 33.1], [117, 32.1]]]);
var properties2 = {name: "Test2", age: 18};
var feature2 = pie.Feature(geometry2, properties2).set("id", "2222");
var collection2 = pie.FeatureCollection(feature2);

// è¦ç´ æ•°æ®é›†åˆå¹¶ï¼Œå¹¶æ·»åŠ åˆ°åœ°å›¾
var fCollection = collection1.merge(collection2).limit(1);
print(fCollection);
fCollection = fCollection.limit(1);
print(fCollection);
```

## load

FeatureCollectionå¯¹è±¡åŠ è½½æ•°æ®ï¼Œä¸€èˆ¬åœ¨FeatureCollectionåˆå§‹åŒ–çš„æ—¶å€™ä¼šé»˜è®¤è°ƒç”¨è¯¥æ–¹æ³•ã€‚

| å‡½æ•°     | è¿”å›å€¼            |
| -------- | ----------------- |
| load(id) | FeatureCollection |

| å‚æ•° | ç±»å‹   | è¯´æ˜     |
| ---- | ------ | -------- |
| id   | String | æ•°æ®è·¯å¾„ |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
print(featureCollection);
```

## map

é’ˆå¯¹FeatureCollectionä¸­çš„æ¯ä¸ªFeatureè¿›è¡Œå¾ªç¯è®¡ç®—ã€‚

| å‡½æ•°                     | è¿”å›å€¼            |
| ------------------------ | ----------------- |
| map(algorithm,dropNulls) | FeatureCollection |

| å‚æ•°      | ç±»å‹     | è¯´æ˜                             |
| --------- | -------- | -------------------------------- |
| algorithm | Function | å‚æ•°æ˜¯Featureçš„æ–¹æ³•ï¼Œè¿”å›Feature |
| dropNulls | Boolean  | æ˜¯å¦å…è®¸è¿”å›ç©ºå€¼                 |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var featureCollectionNew = featureCollection.map(function (feature) {
  var geometry = feature.geometry();
  var featureNew = pie.Feature(geometry.centroid());
  return featureNew;
})
Map.addLayer(featureCollectionNew,{ color:'00FF00FF',width:1,fillColor:'00FF0000',pointSize:20});
Map.setCenter(118,39.7,3);
```

## merge

å®ç°ä¸¤ä¸ªè¦ç´ é›†åˆï¼ˆFeatureCollectionï¼‰çš„åˆå¹¶ï¼Œè¦æ±‚è¦åˆå¹¶çš„ä¸¤ä¸ªFeatureCollectionå‡ ä½•å›¾å½¢ç±»å‹ä¸€è‡´ã€‚

| å‡½æ•°               | è¿”å›å€¼            |
| ------------------ | ----------------- |
| merge(fCollection) | FeatureCollection |

| å‚æ•°        | ç±»å‹               | è¯´æ˜               |
| ----------- | ------------------ | ------------------ |
| fCollection | FeaturerCollection | è¿›è¡Œåˆå¹¶çš„è¦ç´ é›†åˆ |


```javascript
// å®šä¹‰è¦ç´ æ•°æ®é›†1
var geometry1 = pie.Geometry.Polygon([[[117, 31], [118, 31], [118, 32], [117, 32], [117, 31]]]);
var properties1 = {name: "Test1", age: 12};
var feature1 = pie.Feature(geometry1, properties1).set("id", "1111");
var collection1 = pie.FeatureCollection(feature1);

// å®šä¹‰è¦ç´ æ•°æ®é›†2
var geometry2 = pie.Geometry.Polygon([[[117, 32.1], [118, 32.1], [118, 33.1], [117, 33.1], [117, 32.1]]]);
var properties2 = {name: "Test2", age: 18};
var feature2 = pie.Feature(geometry2, properties2).set("id", "2222");
var collection2 = pie.FeatureCollection(feature2);

// è¦ç´ æ•°æ®é›†åˆå¹¶ï¼Œå¹¶æ·»åŠ åˆ°åœ°å›¾
var fCollection = collection1.merge(collection2);
Map.addLayer(fCollection);
Map.setCenter(117.5,32,6);
```

## propertyNames

è¿”å›FeatureCollectionå¯¹è±¡çš„å±æ€§ååˆ—è¡¨ã€‚

| å‡½æ•°            | è¿”å›å€¼ |
| --------------- | ------ |
| propertyNames() | List   |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
featureCollection = featureCollection.set("key1", {name:123});
var propertyNames = featureCollection.propertyNames();
print(propertyNames);
```

## randomColumn

å‘FeatureCollectionä¸­æ·»åŠ ä¸€åˆ—ç¡®å®šæ€§ä¼ªéšæœºæ•°ã€‚è¾“å‡ºä¸ºåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚è®¾ç½®â€œuniformâ€åˆ†å¸ƒï¼ˆé»˜è®¤å€¼ï¼‰æ—¶ï¼Œè¾“å‡ºä¸º[0ï¼Œ1]çš„èŒƒå›´å†…çš„å‡åŒ€åˆ†å¸ƒéšæœºæ•°ã€‚è®¾ç½®â€œnormalâ€åˆ†å¸ƒæ—¶ï¼Œè¾“å‡ºä¸ºÎ¼=0ï¼Œğ›”=1çš„æ­£æ€åˆ†å¸ƒéšæœºæ•°ï¼Œæ­¤æ—¶æ•°å€¼èŒƒå›´æ²¡æœ‰æ˜ç¡®çš„é™åˆ¶ã€‚

| å‡½æ•°                                                         | è¿”å›å€¼            |
| ------------------------------------------------------------ | ----------------- |
| randomColumn (columnName="random", seed=0, distribution= "uniform") | FeatureCollection |

| å‚æ•°         | ç±»å‹   | è¯´æ˜                                                 |
| ------------ | ------ | ---------------------------------------------------- |
| columnName   | String | æ–°å¢åˆ—çš„åç§°ï¼Œé»˜è®¤ä¸º "random"                        |
| seed         | Long   | éšæœºç§å­ï¼Œé»˜è®¤ä¸º0                                    |
| distribution | String | ç”Ÿæˆéšæœºæ•°çš„åˆ†å¸ƒç±»å‹ã€‚èµ‹å€¼ä¸º'uniform' ã€'normal'ä¹‹ä¸€ |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
featureCollection = featureCollection.randomColumn('random');
Map.addLayer(featureCollection,{ color:'FF0000FF',width:1,fillColor:'00FF0000',pointSize:10});
Map.setCenter(118,39.7,3);
```

## reduceColumns

å°†æŒ‡å®šçš„selectorä¸­çš„å±æ€§å€¼æ ¹æ®reducerè®¡ç®—ï¼Œè¿”å›ä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚

| å‡½æ•°                                            | è¿”å›å€¼ |
| ----------------------------------------------- | ------ |
| reduceColumns(reducer,selectors,weightSelector) | Object |

| å‚æ•°           | ç±»å‹    | è¯´æ˜                           |
| -------------- | ------- | ------------------------------ |
| reducer        | Reducer | ç»Ÿè®¡å™¨ï¼Œç›®å‰ä»…æ”¯æŒtoListç»Ÿè®¡å™¨ |
| selectors      | Array   | è¦ç»Ÿè®¡çš„å±æ€§åˆ—è¡¨               |
| weightSelector | Array   | å„ä¸ªå±æ€§çš„æƒé‡ï¼Œç›®å‰æœªå¯ç”¨     |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var value = featureCollection.reduceColumns(pie.Reducer.toList(),["name"]);
print(value);
```

## set

è®¾ç½®FeatureCollectionä¸‹çš„å±æ€§ä¿¡æ¯ï¼Œå¦‚æœå­˜åœ¨å°±è¦†ç›–æ›´æ–°ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç›´æ¥åˆ›å»ºã€‚

| å‡½æ•°           | è¿”å›å€¼ |
| -------------- | ------ |
| set(key,value) | Void   |

| å‚æ•°  | ç±»å‹                                  | è¯´æ˜   |
| ----- | ------------------------------------- | ------ |
| key   | String                                | å±æ€§å |
| value | String\|Number\|Boolean\|Object\|List | å±æ€§å€¼ |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
featureCollection = featureCollection.set("key1",{name:123});
var value = featureCollection.get("key1");
print(value);
//æœ‰ä¸¤ç§æ–¹æ³•å‡å¯è·å–nameçš„å€¼123
//æ¨èä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š
var v = pie.Dictionary(featureCollection.get("key1")).get("name");
print(v);
//ä¸æ¨èä½¿ç”¨getInfoï¼Œä¼šä½¿é¡µé¢å¡ä½
var vv = featureCollection.get("key1").getInfo()["name"];
print(vv)
```

## setMulti

æ‰¹é‡è®¾ç½®FeatureCollectionä¸‹çš„å±æ€§ä¿¡æ¯ï¼Œå¦‚æœå­˜åœ¨å°±è¦†ç›–æ›´æ–°ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç›´æ¥åˆ›å»ºã€‚

| å‡½æ•°                 | è¿”å›å€¼ |
| -------------------- | ------ |
| setMulti(properties) | Void   |

| å‚æ•°       | ç±»å‹       | è¯´æ˜                       |
| ---------- | ---------- | -------------------------- |
| properties | Dictionary | å±æ€§é”®å€¼å¯¹ï¼Œä»¥å­—å…¸å½¢å¼ä¼ å…¥ |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var dict = {key1: [1, 2, 3, 4, 5, 6], key2: 12.34, key3: "12.34"};
featureCollection = featureCollection.setMulti(dict);
print(featureCollection);
```

## size

è·å¾—çŸ¢é‡æ•°æ®ä¸­PIEFeatureçš„ä¸ªæ•°ã€‚

| å‡½æ•°   | è¿”å›å€¼ |
| ------ | ------ |
| size() | Number |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var count = featureCollection.size();
print(count);
```

## style

FeatureCollectionæ•°æ®æ¸²æŸ“æ˜¾ç¤ºï¼Œè¿”å›æ¸²æŸ“ç»˜åˆ¶åçš„Imageå¯¹è±¡ã€‚

| å‡½æ•°         | è¿”å›å€¼ |
| ------------ | ------ |
| style(style) | Image  |

| å‚æ•°  | ç±»å‹     | è¯´æ˜                     |
| ----- | -------- | ------------------------ |
| style | Jsonå¯¹è±¡ | æ•°æ®å¯è§†åŒ–æ ·å¼ï¼Œå‚è€ƒç¤ºä¾‹ |


```javascript
var featureCollection = pie.FeatureCollection().load('NGCC/CHINA_PROVINCE_BOUNDARY');
var image = featureCollection.style({color:'FFFF00FF',width:1,fillColor:'00FFFFFF'});
Map.addLayer(image);
Map.setCenter(118,39.7,2);
```

