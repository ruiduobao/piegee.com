---
title: 矿产地数据
date: 2022-04-10 17:13:20
permalink: /pages/60cf59/
categories:
  - data-gis
  - 领域数据
  - 地质学
tags:
  - 
---
## 全国矿产地数据库下载和应用

今天的文章介绍一个重要数据库

全国矿产地数据库

本文以该数据库为例

介绍如何应用网络下载的数据

如何思考，如何分析，如何使用

下面正式文章

![全国矿产地数据库下载和应用大纲](http://pics.landcover100.com/pics///6252a0d19fce8.png)



## **一、数据简介**

全国矿产地数据库是新一轮国土资源大调查

数字国土工程的重要项目之一

是地质调查信息化工作中的基础性数据库

数据库包含了全国29个省（下图）

![全国矿产地数据库2021版](http://pics.landcover100.com/pics///6252a0ed03f95.png)

工作范围覆盖了全国

较全面地反映了中国地矿部系统

建国以来矿产资源勘查工作的成果

全国矿产地数据库全程包含质量监控

 全国汇总过程中又进行了全面的复核、纠错

基本上达到了资料收集齐全、内容准确

数据录入完整准确，数据结构

数据精度都符合有关技术标准，总体质量可靠

全国矿产地数据库是一个矿种齐全、覆盖面广

内容丰富、数据量大且时间跨度大的大型数据库

为矿产资源调查评价、科研教学、矿业开发

规划管理提供了十分重要的基础信息

以上是官方完整介绍



中国地质调局发展研究中心将其做成

“全国矿产地质大数据2021版”系统

我们可以通过互联网浏览全国矿产地数据

下面介绍网站使用方法

该系统提供了一些便捷工具

如：图层列表显示

用户可以做全国各种矿产专题图（图1）

同时网站提供各类图例符号（图2）

用户可以根据需要

通过输入矿产地名、矿种进行筛选

也可以根据行政区划、成矿带（图3）

或者自己画范围选择位置（图4）

进而自定义矿产专题图

| ![全国各种矿产专题图](http://pics.landcover100.com/pics///6252a15b9d080.png) | ![1649582454513.png](http://pics.landcover100.com/pics///6252a17c58085.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1图层列表显示                                                | 2图例符号显示                                                |
| ![1649582482344.png](http://pics.landcover100.com/pics///6252a19550b86.png) | ![1649582499728.png](http://pics.landcover100.com/pics///6252a1a6f1fca.png) |
| 3行政区划显示                                                | 4自定义筛选                                                  |

## **二、下载方法**

在地质科学数据出版系统中

所有数据都是免费的（全国地质资料馆）

在官网注册账号即可下载

打开地质科学数据出版系统网站

有全国各个尺度的地质图空间数据库

此外还有报告、地质图、钻孔等数据可以下载

这个网站也一直在发布服务

换句话说就是动态更新的

经常登录看看，总能发现好东西

比如今年新发布的全国矿产地数据库（图2）

和全国1:20万水文地质图空间数据库

都是特别实用、宝贵的资源



| ![1649582537131.png](http://pics.landcover100.com/pics///6252a1cae2613.png) | ![1649582553703.png](http://pics.landcover100.com/pics///6252a1d9e2ec1.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1动态更新                                                    | 2全国矿产地数据库                                            |

官网下载：http://dcc.ngac.org.cn/cn//geologicalData/details/doi/10.23650/data.C.2018.NGA120770.K1.1.1.V1

第一步：复制上面网址

第二步：登录全国地质资料馆（图1）

第三步：选择全国矿产地数据库（图2）

在他文章最后有下载链接（图3）

单击可下载到本地（图4）

| ![1649582573769.png](http://pics.landcover100.com/pics///625297958108e.png) | ![1649582596673.png](http://pics.landcover100.com/pics///6252a209f0607.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1登录全国地质资源馆                                          | 2选择全国矿产地数据库                                        |
| ![1649582619435.png](http://pics.landcover100.com/pics///6252a21dce4d8.png) | ![1649582643452.png](http://pics.landcover100.com/pics///6252a235756d4.png) |
| 3下载数据库                                                  | 4下载本地                                                    |

需要说明的下载条款：

\1. 本数据仅供下载者本人学习和研究使用。

\2. 用户在使用本数据时，应尊重数据作者的劳动成果，在使用本数据的相应研究成果中务必明确标注引用了本数据。

\3. 摘取数据中的部分记录创作新数据的作者需要遵循10%引用原则，即从本数据中摘取的数据记录少于新数据集总记录量的10%，同时需要对摘取的数据记录标注数据来源。

\4. 本网站不承担用户因使用本数据而可能对自己和他人造成的任何形式的损失或伤害。

5.禁止爬取数据，本网站限制每个账号每天下载5个数据，当前已下载0个。

6.请填写真实信息，填写信息错误会面临下载功能被取消或者封号的风险。

## **三、数据使用**

### **（一）分析思路**

（1）看看是数据库什么格式。一般元数据有介绍

（2）Arcgis能否打开。不能打开，上网查格式想办法

（3）查看数据库记录的信息。打开后查看字段及记录内容



下面按照这个思路进行

#### **（1）看看是数据库什么格式**

我们使用数据一定要知道出处

也就是“元数据”数据的属性

下面贴出官方数据库（集）元数据简表

![官方数据库（集）元数据简表](http://pics.landcover100.com/pics///6252a24fe5e29.png)



#### （2）Arcgis能否打开

全国矿产地数据库.accdb

后缀名为.accdb，不是很常见

如果不懂就上网查（图1）

发现是Microsoft Access软件使用的一种存储格式

好了，Arcgis是支持access个人文件数据库的

我们在尝试，用Arcgis打开accdb

发现Arcgis不能检索到accdb

那我们就另存成另一种格式.mdb（图2）

| ![1649582692679.png](http://pics.landcover100.com/pics///6252a26924d9b.png) | ![1649582714661.png](http://pics.landcover100.com/pics///6252a27ce84b1.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1百度查询                                                    | 2Arcgis是否支撑                                              |



mdb格式是Arcgis支持的

一种个人地理数据库格式

用Arcmap打开

首先看看有没有要素类（地理空间实体）

打开后发现，只有属性表（结构化属性表）下图

| ![1649583069253.png](http://pics.landcover100.com/pics///6252a3e576a8c.png) | ![1649583107350.png](http://pics.landcover100.com/pics///6252a4088bd26.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 属性表内容                                                   | 表的属性                                                     |

#### **（3）查看数据库记录的信息**

有元数据介绍还不够

如果要使用数据库

还需要对每个字段有所了解

打开数据库，发现所有字段都是代号（看不懂）

那找找有没有关于字段说明

可以在字段设计里查看（图1）

也可以在名称和标题里查看（图2）

| ![1649583141495.png](http://pics.landcover100.com/pics///6252a427e80d8.png) | ![1649583160454.png](http://pics.landcover100.com/pics///6252a43cc9f0d.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1字段设计                                                    | 2标题和名称                                                  |



各种办法都尝试后，确实没有

在没有任何说明的情况下

只能根据属性值反推字段

![1649583183830.png](http://pics.landcover100.com/pics///6252a4550891e.png)



首先数据库有27569条记录

与元数据说明是匹配的

仔细分析数据库字段

第一类KCAAA为数字号码，目前看不懂

KCC应该是矿产种类、JJDAJ是地名

JJGLA交通位置、再后两个应该是地理经纬度

KCBA矿床成因字段、再后两个不清楚

PKGKB可能就是矿床规模

KCAOC则是时代信息，推测为成矿时代

最后两个字段一个是调查、另一个应该是利用情况

一共14个字段

有这些字段可以做很多分析研究

比如全国地质资料馆利用其中的位置信息

就做成了“全国矿产地数据库2021版”系统

### **（二）数据整理**

这个数据是accdb格式的

经过初步分析Arcgis不能直接用

我们可以转成Arcgis可以识别的个人地理数据库（mdb）

或者导出excel借用Arcgis的添加XY坐标实现

下面演示操作

#### **（1）格式转换**

access数据库转excel

需要说明的是一定要转成.xlsx格式（图1）

.xls是excel2003版以前的数据格式

最多能存储65536行记录

而且它是特有的二进制格式

xlsx能存储多1048576行

采用的是基于XML的压缩方式

使其占用的空间更小并且数据分析更快



再分析空间数据特征

显然DWAAC和DWAAD这两个字段是经纬度

接下来我们分析坐标特点

发现位置信息存储了两类数据

其中一类记录经纬度点的XY值

另一类记录的是经纬度的范围

说白了第一类是矿点（点）

第二类是矿区（区域）（图2）

| ![1649583204802.png](http://pics.landcover100.com/pics///6252a4696d28d.png) | ![1649583224451.png](http://pics.landcover100.com/pics///6252a47b9c42a.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1导出excel                                                   | 2位置信息特点                                                |

#### **（2）制作矿点要素**

在EXCEL中进行筛选，分三步

##### **第一步：分列（图1）**

分列之前先插入一个空白列

（直接分列会覆盖后面的数据）

用“-”进行分列（图2）

（当然也可以用Ctrl+e智能填充）

详细操作见下面截图

| ![1649583253046.png](http://pics.landcover100.com/pics///6252a4a378dfc.png) | ![1649583285639.png](http://pics.landcover100.com/pics///6252a4b9d541b.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1插入空列                                                    | 2分列                                                        |

同理分列纬度



##### **第二步：筛选**

筛选矿点的方法

单击筛选工具

选中分列的最大经度列

刷选空值即为矿点数据（图1）

但是发现，最大纬度也有数据的

按理来说不应该

（原因：源数据没有做好矿区记录

也可能该矿区为三角形

但三角形矿区概率几乎为零）

所以我们统一按矿点数据处理

在筛选最大经度的前提下

把最大纬度值删掉（图2）

| ![1649583312708.png](http://pics.landcover100.com/pics///6252a4d5c701e.png) | ![1649583349909.png](http://pics.landcover100.com/pics///6252a4f853fc8.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1筛选空值                                                    | 2删除最大纬度                                                |

介绍一个excel批量选择数据方法

同时按着ctrl和shift，不松手

选择上下左右键（前提数据连续）

![1649583332107.png](http://pics.landcover100.com/pics///6252a4e83b3ee.png)





批量复制筛选后的数据

新建一个工作表并命名矿点（图1）

最好以数值粘贴（图2）

| ![1649583386001.png](http://pics.landcover100.com/pics///6252a51f73f76.png) | ![1649583408091.png](http://pics.landcover100.com/pics///6252a5324ba05.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1新建工作表                                                  | 2以数值粘贴                                                  |



##### **第三步：统一经度位数**

该数据库提供的坐标信息判定为度分秒

（为什么：因为第三四位没有超过60的）

我们需要批量提取度分秒

但是仔细发现有些经度只有6位

这也正常

中国青海四川以西地区，经度达不到100度（图1）

现在既有6位又有7位，不好批量操作

所以我们得给6位前补零，统一按7位处理

用Excel处理数据特别有意思

可以思考很多种办法

方法一：可以用函数len计算经度长度（图2）

| ![1649583441839.png](http://pics.landcover100.com/pics///6252a557845e9.png) | ![1649583463173.png](http://pics.landcover100.com/pics///6252a56b2977e.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1中国经度特点                                                | 2led函数                                                     |

用if函数嵌套

如果字符长度=6，进行补零

否则单元格值不变

=IF(LEN(D8)=6,"0"&D8,D8)（图1）

方法二：设置单元格格式"0000000"（图2）

然后复制该列到txt里

设置单元格为文本格式，在粘贴回来

| ![1649583487881.png](http://pics.landcover100.com/pics///6252a5842ecb0.png) | ![1649583532069.png](http://pics.landcover100.com/pics///6252a5b1afc80.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1公式嵌套                                                    | 2设置单元格格式                                              |



##### **第四步：度分秒转度十进制**

大家都知道度分秒换算

1°= 1′*60 = 1″*60*60

用三个常用的字符提取函数

left，mid，right下面简单介绍

left函数用于从左边取几个字符

以经度为例，我们取前三位：LEFT(E2,3）

mid函数从中间第几个字符开始取，取几个

以经度为例，我们从第4个字符开始取

取两位：MID(E2,4,2)

right函数从右边取几个字符

以经度为例，我们取后两位：RIGHT(E2,2)

然后双击单元格填充柄

=LEFT(E2,3)+(MID(E2,4,2)+RIGHT(E2,2)/60)/60（图1）

同理，纬度一样操作

=LEFT(G2,2)+(MID(G2,3,2)+RIGHT(G2,2)/60)/60（图2）

至此我们矿点信息处理完毕

| ![1649583585762.png](http://pics.landcover100.com/pics///6252a5e7e05a3.png) | ![1649583606794.png](http://pics.landcover100.com/pics///6252a5fa1cccf.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1经度处理公式                                                | 2纬度处理公式                                                |



##### **第五步：Arcgis添加XY坐标**

将工作表拖进Arcmap中

文件菜单下，选择添加数据-添加XY数据

X字段选择十进制的经度

Y字段选择十进制的纬度（图1）

坐标系选择编辑，选择WGS84或者国家2000



**第六步：Arcgis导出实体要素类**

导出数据（图2）

| ![1649583644028.png](http://pics.landcover100.com/pics///6252a61ee9d0d.png) | ![1649583663081.png](http://pics.landcover100.com/pics///6252a63219cf0.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1添加XY坐标                                                  | 2导出要素                                                    |





#### **（3）制作矿区要素**

对于矿区的处理，困扰了我好久

想过很多办法

比如工具xy转线，或者做模型等

下面介绍三种方法，重点讲方法三

方法一：使用工具xy转线

参数如图1所示

点转xy做出效果（图2）

当时只考虑了他的起点和终点坐标

结果只做出来矿区对角线，显然是不对

| ![1649583682960.png](http://pics.landcover100.com/pics///6252a64593b7b.png) | ![1649583701567.png](http://pics.landcover100.com/pics///6252a658ed013.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1工具xy转线                                                  | 2做出效果                                                    |

在写这篇文章的时候

突发奇想换个思路

工具里的起点、终点参数是相对感念

如果我们做四次操作

分别生成矿区的四个边线也是可行的

只不过最后生成的是断线

方法二：模型批处理

做模型批量处理关键点是

一个矿区要分成四行记录处理

也就是需要在现有的每行下插入三行（图1）

然后用点集转线工具

在网上找了个模型工具（点转面）

也可以实现

| ![1649583725597.png](http://pics.landcover100.com/pics///6252a67438e94.png) | ![1649583749363.png](http://pics.landcover100.com/pics///6252a6888dd22.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1模型关键处理                                                | 2点转面模型                                                  |





方法三：用矿区四个点生成线

本例重点讲解该方法

矿区参考矿点方法制作成4个点坐标

第一步：筛选最大经度的

同时筛选最大纬度（图1）

然后全选数据

粘贴到新的工作表并命名矿区（图2）

| ![1649583773531.png](http://pics.landcover100.com/pics///6252a6a3795bf.png) | ![1649583798354.png](http://pics.landcover100.com/pics///6252a6bb13d66.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1筛选最大经度的                                              | 2粘贴到矿区                                                  |



最大最小经度都存在6/7位问题

处理办法同矿点（这个问题建议在最最开始做）

接下来需要把经纬度转成十进制度单位

用同样的办法，生成四列（图1）

最小经度、最大经度、最小纬度、最大纬度

依次添加XY坐标

分别生成矿区事件（图2）

| ![1649583823606.png](http://pics.landcover100.com/pics///6252a6d7d80d3.png) | ![1649583844845.png](http://pics.landcover100.com/pics///6252a6e67bcf7.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1度分秒转十进制度                                            | 2添加XY坐标                                                  |



最后导出矿区4个点的坐标要素（图1）

实体化坐标

四个为一组效果如下（图2）

| ![1649583859107.png](http://pics.landcover100.com/pics///6252a6f4b92f6.png) | ![1649583875748.png](http://pics.landcover100.com/pics///6252a70598627.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1导出四个坐标点                                              | 2效果                                                        |



还有一步至关重要

就是分别给4个点生成一个序号列

生成序列号方法当时我也想了好久

上网查基本都是使用Python

我研究出一个办法不用编程的办法

只用arcgis本身工具

方法：

打开属性表-添加字段（图1）

字段名称-序号-短整型（图2）

然后在序号-字段计算器（图3）

双击OBJECTID，让序号=每行的唯一ID（图4）

| ![1649583899459.png](http://pics.landcover100.com/pics///6252a72169e9e.png) | ![1649583916794.png](http://pics.landcover100.com/pics///6252a730263d9.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1添加字段                                                    | 2字段设置                                                    |
| ![1649583934469.png](http://pics.landcover100.com/pics///6252a7444448d.png) | ![1649583957797.png](http://pics.landcover100.com/pics///6252a75ac6fc4.png) |
| 3字段计算器                                                  | 4让序号=OBJECTID                                             |

详细操作见下面动图

![1649583977937.png](http://pics.landcover100.com/pics///6252a76b65cc0.png)![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

为什么生成序号列

后面会讲到，它是一个重要参数

我们根据这个参数给每个矿区造线

再用合并工具

将矿区四个点合并到一个图层

合并同样有个注意事项

添加4个点时一定要注意顺序

可以顺时针也可以者逆时针

但是不能先选最小经纬度后再选最大经纬度

不然矿区线要么是沙漏型要么是Z字型

详细操作见下图

![1649583997457.png](http://pics.landcover100.com/pics///6252a77f528fb.png)

合并完成后

用点集转线工具

将四个点按顺序连线

有个重要参数

就是上面提到的顺序号

一定要勾选上（图1）

点集转线完成效果（图2）

| ![1649584054966.png](http://pics.landcover100.com/pics///6252a7b9e9db4.png) | ![1649584073446.png](http://pics.landcover100.com/pics///6252a7cd17a12.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1点集转线                                                    | 2矿区合成                                                    |

打开矿区线属性表没有矿区属性（图1）

接下来我们需要给线赋属性

方法：用空间连接

空间连接参数选择（图2）

| ![1649584097853.png](http://pics.landcover100.com/pics///6252a7e50a05c.png) | ![1649584136389.png](http://pics.landcover100.com/pics///6252a7f3cb671.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1矿区线属性表                                                | 2空间连接                                                    |

空间连接详细操作见下动图

![1649584154147.png](http://pics.landcover100.com/pics///6252a81d4dde8.png)



上面操作生成的是线

接下来思考：如何把线生成面

线生成面，大家第一反应都是用要素转面工具

但是经实际操作

执行要输转面后所有的面文件都被打散（图1）

并且属性也丢失了（图2）

| ![1649584174824.png](http://pics.landcover100.com/pics///6252a831c190e.png) | ![1649584192207.png](http://pics.landcover100.com/pics///6252a8421cf66.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1面打散                                                      | 2属性丢失                                                    |



所以简单的要素转面工具不能实现我们的需求

在网上找了很多功能也没见到解决办法

今天我又思考成功把这个问题解决

本文先不贴出处理办法

恩格斯说过“思维是地球上最美丽的花朵”

建议大家也想一想

也许你们的办法更好

可以在留言区留下你们的思考

微信公众号对话框回复“线转面”

可以获取我的制作思路

![1649584217805.png](http://pics.landcover100.com/pics///6252a85ec964b.png)

至此矿点矿区都有了

全国矿产地数据产品初步完成

如果想做成系统，像全国馆的

还需要根据标准规范做些地图符号表达

换句话说就是铁矿啥的咋用符号表示

自己定义符号表达后，即可输出图片

也可以定制成自己的数据库产品

作为项目收集的基础资料再研究、再应用等等



最后做个总结

没事多上网捣鼓捣鼓数据

既能增加自己的认识

也能提高软件操作水平

顺便定制自己的数据产品

还有，尤其是多个软件相互操作

要想实现自己的目的

就要思考多种解决问题的办法

创新性思维很美妙，也有成就感

也是提高自身创新能力的一种方式



注：本资源来自全国地质资料馆，为尊重知识产权，本文不提供资源下载，案例操作仅做学习用

## 作者

![1649581876841.png](http://pics.landcover100.com/pics///62529f37ee60e.png)